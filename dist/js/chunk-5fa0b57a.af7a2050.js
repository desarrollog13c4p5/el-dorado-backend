(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5fa0b57a"],{"363b":function(t,e,o){},"9ccf":function(t,e,o){"use strict";o("363b")},e229:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"row"},[o("form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmitForm.apply(null,arguments)}}},[o("h5",[t._v("Nuevo Préstamo")]),o("div",{staticClass:"row pb-2"},[o("div",{staticClass:"col-9"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.nuevo_prestamo.libro,expression:"nuevo_prestamo.libro"}],staticClass:"form-control",attrs:{type:"text",id:"inNombre",placeholder:"Seleccione un Libro de la lista",value:"",readonly:"",required:""},domProps:{value:t.nuevo_prestamo.libro},on:{input:function(e){e.target.composing||t.$set(t.nuevo_prestamo,"libro",e.target.value)}}})])]),o("div",{staticClass:"row"},[o("div",{staticClass:"col-5"},[o("select",{directives:[{name:"model",rawName:"v-model",value:t.nuevo_prestamo.idUsuario,expression:"nuevo_prestamo.idUsuario"}],staticClass:"form-select pe-1",attrs:{name:"",id:"selUsuario",required:""},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.nuevo_prestamo,"idUsuario",e.target.multiple?o:o[0])}}},[o("option",{attrs:{value:"",selected:"",disabled:""}},[t._v(" Seleccione un usuario... ")]),t._l(t.Usuarios,(function(e){return o("option",{key:e._id,domProps:{value:e._id}},[t._v(" "+t._s(e.nombre+" "+e.apellido)+" ")])}))],2)]),o("div",{staticClass:"col-4"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.nuevo_prestamo.fecha,expression:"nuevo_prestamo.fecha"}],staticClass:"form-control ps-1",attrs:{type:"date",id:"inFecha","data-bs-toggle":"tooltip",title:"Fecha de entrega",required:""},domProps:{value:t.nuevo_prestamo.fecha},on:{input:function(e){e.target.composing||t.$set(t.nuevo_prestamo,"fecha",e.target.value)}}})]),o("div",{staticClass:"col"},[o("div",{staticClass:"col"}),o("button",{staticClass:"col btn btn-primary",attrs:{disabled:""==t.nuevo_prestamo.libro||t.bloquear}},[t._v(" Prestar ")])])]),t._m(0),o("hr")])]),""!=this.mensajeError?o("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v(" "+t._s(t.mensajeError)+" ")]):t._e(),o("h5",[t._v("Lista de Préstamos")]),o("div",{staticClass:"row pb-3 d-none"},[o("div",{staticClass:"col-5 pe-1"},[o("div",{staticClass:"input-group"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.filtro,expression:"filtro"}],staticClass:"form-control",attrs:{type:"text",id:"inFitroTexto",placeholder:"Todos"},domProps:{value:t.filtro},on:{input:function(e){e.target.composing||(t.filtro=e.target.value)}}})])]),o("div",{staticClass:"col-auto"},[o("button",{staticClass:"btn btn-primary",attrs:{disabled:t.bloquear}},[t._v("Buscar")])])]),o("div",{staticClass:"row ps-3 pe-1"},[o("table",{staticClass:"table table-sm table-bordered"},[t._m(1),o("tbody",t._l(t.Prestamos,(function(e){return o("tr",{key:e._id},[o("td",[t._v(t._s(e.libro))]),o("td",{attrs:{id:"cent"}},[t._v(t._s(e.prestamo))]),o("td",[t._v(t._s(e.usuario))]),o("td",{attrs:{id:"cent"}},["Ninguno"==e.prestamo?o("button",{staticClass:"btn btn-outline-primary btn-sm p-1",on:{click:function(o){return o.preventDefault(),t.seleccionarLibro(e._id,e.libro)}}},[t._v(" Seleccionar ")]):"Vencido"==e.prestamo?o("button",{staticClass:"btn btn-outline-danger btn-sm p-1",on:{click:function(o){return o.preventDefault(),t.entregarLibro(e._id)}}},[t._v(" Entregar ")]):o("button",{staticClass:"btn btn-outline-success btn-sm p-1",attrs:{disabled:"Error"==e.prestamo},on:{click:function(o){return o.preventDefault(),t.entregarLibro(e._id)}}},[t._v(" Entregar ")])])])})),0)])])])},r=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"col"},[o("div",{staticClass:"row"})])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("thead",[o("tr",{attrs:{id:"cent"}},[o("th",{attrs:{scope:"col"}},[t._v("Libro")]),o("th",{attrs:{scope:"col"}},[t._v("Préstamo")]),o("th",{attrs:{scope:"col"}},[t._v("Usuario")]),o("th",{attrs:{scope:"col"}},[t._v("Acción")])])])}],s=o("bc3a"),i=o.n(s),n="https://warm-dusk-59680.herokuapp.com/",l={data:function(){return{nuevo_prestamo:{libro:"",idLibro:"",idUsuario:"",fecha:""},filtro:"",mensajeError:"",bloquear:!0,Prestamos:[],Usuarios:[]}},created:function(){console.log("Listando Prestamos"),this.listarPrestamos()},mounted:function(){var t=new Date;document.getElementById("inFecha").min=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+(t.getDate()+1),console.log(document.getElementById("inFecha").min)},methods:{handleSubmitForm:function(){var t=this;this.bloquear=!0;var e=n+"api/nuevo-prestamo";console.log(e),i.a.post(e,{fecha_entrega:this.nuevo_prestamo.fecha,id_usuario:this.nuevo_prestamo.idUsuario,id_libro:this.nuevo_prestamo.idLibro}).then((function(e){console.log(e.data),t.listarPrestamos()})).catch((function(e){console.log(e),t.mensajeError="Error prestando Libro.",t.bloquear=!1}))},listarPrestamos:function(){var t=this;i.a.get(n+"api/prestamo").then((function(e){t.Prestamos=e.data,console.log(JSON.stringify(t.Prestamos)),t.listarUsuarios(),t.bloquear=!1})).catch((function(e){console.log(e),t.mensajeError="No se puede traer la lista de Prestamos."})),this.nuevo_prestamo.libro="",this.nuevo_prestamo.idUsuario="",this.nuevo_prestamo.fecha="",this.filtro=""},listarUsuarios:function(){var t=this;i.a.get(n+"api/usuario/").then((function(e){t.Usuarios=e.data,t.mensajeError=""})).catch((function(e){console.log(e),t.mensajeError="No se puede traer la lista de Usuarios."}))},seleccionarLibro:function(t,e){this.nuevo_prestamo.libro=e,this.nuevo_prestamo.idLibro=t},entregarLibro:function(t){var e=this;this.bloquear=!0;var o=n+"api/prestamo/"+t;console.log(o),i.a.delete(o).then((function(t){console.log(t.data),e.listarPrestamos()})).catch((function(t){console.log(t),e.mensajeError="Error entregando Libro.",e.bloquear=!1}))}}},c=l,u=(o("9ccf"),o("2877")),d=Object(u["a"])(c,a,r,!1,null,"59929a82",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-5fa0b57a.af7a2050.js.map